---
import Layout from "../../layouts/Layout.astro";
import AgendaComponent from "../../components/Agenda.astro";
import { CFP_LINK } from "../../consts";
import {
  isAfterCFPClosing,
  isAfterCFPOpenning,
  isAfterOpenningProgram,
} from "../../utils";

const breaks = [
  {
    data: {
      name: "Accueil",
      startDate: "0930",
      endDate: "1000",
    },
    slug: undefined,
  },
  {
    data: {
      name: "Pause déjeuner",
      startDate: "1215",
      endDate: "1310",
    },
    slug: undefined,
  },
  {
    data: {
      name: "Pause",
      startDate: "1420",
      endDate: "1445",
    },
    slug: undefined,
  },
  {
    data: {
      name: "Pause",
      startDate: "1550",
      endDate: "1615",
    },
    slug: undefined,
  },
];

const schema = {
  "@context": "https://schema.org",
  "@type": "Event",
  name: "Programme de la conférence",
  description: "Le programme de la conférence de développement web.",
  startDate: "2024-05-15T09:00:00-07:00",
  endDate: "2024-05-16T17:00:00-07:00",
  location: {
    "@type": "Place",
    name: "Cityville Conference Center",
    address: {
      "@type": "PostalAddress",
      streetAddress: "123 Conference Center Drive",
      addressLocality: "Cityville",
      addressRegion: "State",
      postalCode: "12345",
      addressCountry: "Country",
    },
  },
  eventAttendanceMode: "https://schema.org/OfflineEventAttendanceMode",
  eventStatus: "https://schema.org/EventScheduled",
};
---

<Layout title="Programme" schema={schema}>
  <main>
    <section class="max-w-screen-lg m-auto flex flex-col items-center px-8 py-12">
      <section class="flex flex-col items-center gap-4">
        {
          isAfterCFPOpenning() && !isAfterCFPClosing() && (
            <section class="flex flex-col items-center gap-4">
              <p class="text-center text-2xl font-bold">
                Notre appel à speakers est ouvert jusqu'au 14 mars 2025
              </p>
              <a href={CFP_LINK} target="_blank" class="btn btn-primary">
                Soumettez vos propositions
              </a>
            </section>
          )
        }

        {
          isAfterCFPClosing() && !isAfterOpenningProgram() && (
            <section class="flex flex-col items-center gap-4">
              <p class="text-center text-2xl font-bold">
                Notre appel à speakers est fermé. Programme à venir !
              </p>
            </section>
          )
        }

        {isAfterOpenningProgram() && <AgendaComponent breaks={breaks} />}

        {
          !isAfterCFPOpenning() && (
            <section class="flex flex-col items-center gap-4">
              <p class="text-center text-2xl font-bold">
                L'agenda sera disponible après la clôture de l'appel à speakers.
              </p>
            </section>
          )
        }
      </section>
    </section>
  </main>
</Layout>
