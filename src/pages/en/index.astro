---
import Partners from "../../components/Partners.astro";
import Sponsors from "../../components/Sponsors.astro";
import Layout from "../../layouts/Layout.astro";
import {
  ADDRESS,
  BLIND_TICKET_PRICE,
  BLIND_TICKET_SOLD_OUT,
  EVENT_DATE,
  EVENT_END_TIME,
  EVENT_START_TIME,
  HELLOASSO_LINK,
  OPEN_BLIND_TICKET_SALE_DATE,
  OPEN_TICKET_SALE_DATE,
  OPEN_WORKSHOP_TICKET_SALE_DATE,
  PARTENERS,
  SPONSORS,
  TICKETING_TRIGGER_EVENT,
  TICKET_PRICE,
  TICKET_SOLD_OUT,
  WORKSHOP_TICKET_PRICE,
  WORKSHOP_TICKET_SOLD_OUT,
} from "../../consts";
import { displayDate } from "../../utils";
---

<Layout title={EVENT_DATE}>
  <main>
    <!-- Hero Section with Conference Image -->
    <div
      class="hero min-h-[calc(100vh-64px)] relative"
      style="background-image: url('/hero/home-hero.jpg'); background-size: cover; background-position: center;"
    >
      <div class="hero-overlay bg-opacity-80 bg-base-100"></div>
      <div class="hero-content text-center text-base-content px-4 relative">
        <div class="max-w-4xl">
          <img
            class="w-full max-w-sm mx-auto"
            src="/ng-baguette-logo-colorfull-white.png"
            alt="NG Baguette Logo"
          />
          <h1 class="text-4xl md:text-6xl font-bold mb-6 title-font text-white tracking-wide">
            French cooked Angular conference
          </h1>
          <p class="text-xl md:text-2xl text-white/90 mb-8 max-w-2xl mx-auto">
            Join us for a unique Angular conference experience in France!
            Discover the latest in Angular development, network with experts
            and fellow developers.
          </p>
          <div class="flex flex-col md:flex-row items-center justify-center gap-4 md:gap-8 mb-8">
            <div class="text-center md:text-left">
              <p class="text-2xl md:text-3xl font-bold text-white">
                {displayDate(EVENT_DATE, "en-US")}
              </p>
              <p class="text-lg text-white/80">{EVENT_START_TIME} - {EVENT_END_TIME}</p>
            </div>
            <div class="hidden md:block w-px h-12 bg-base-content/30"></div>
            <div class="text-center md:text-left">
              <p class="text-2xl md:text-3xl font-semibold text-white">
                {ADDRESS.addressLocality}
              </p>
              <p class="text-base text-white/70">
                {ADDRESS.addressCountry}
              </p>
            </div>
          </div>
          {TICKETING_TRIGGER_EVENT === 'open' && (
            <a
              href="#tickets"
              class="btn btn-primary btn-lg mt-4 font-bold"
            >
              Get Your Tickets
            </a>
          )}
        </div>
      </div>
    </div>

    <!-- Main Content Section -->
    <section class="max-w-7xl mx-auto px-4 md:px-8 py-16">
      <!-- Tickets Section -->
      <div id="tickets" class="mb-16 scroll-mt-20">
        <h2 class="text-3xl md:text-4xl font-bold mb-8 text-center">Get Your Tickets</h2>
        
        {TICKETING_TRIGGER_EVENT === 'open' && (
          <ul class="flex flex-col md:flex-row gap-6 items-stretch max-w-5xl mx-auto">
                <li
                  class="flex-1 card bg-base-200 shadow-lg border border-base-300/50 hover:border-base-300 transition-colors"
                >
                  <div class="card-body flex flex-col items-center py-8">
                    <h3 class="card-title text-xl text-center mb-1">Blind Ticket</h3>
                    <p class="text-sm text-base-content/60 mb-4">Limited availability</p>
                    <span class="text-4xl font-bold mb-6">€{BLIND_TICKET_PRICE}</span>

                    {
                      new Date() >= new Date(OPEN_BLIND_TICKET_SALE_DATE) ? (
                        BLIND_TICKET_SOLD_OUT ? (
                          <p class="text-base-content/60 text-sm">Sold out</p>
                        ) : (
                          <button
                            class="btn btn-primary w-full"
                            onclick="document.getElementById('ticket-modal').showModal()"
                          >
                            Get your ticket
                          </button>
                        )
                      ) : (
                        <p class="text-base-content/60 text-sm text-center">
                          Not yet on sale from
                          {displayDate(OPEN_BLIND_TICKET_SALE_DATE, "en-US")})
                        </p>
                      )
                    }
                    <dialog id="ticket-modal" class="modal">
                      <div class="modal-box">
                        <h3 class="font-bold text-lg">Important Note</h3>
                        <p class="py-4">
                          To reduce costs and simplify the first edition, we are
                          using a free French platform dedicated to non profit
                          events.
                        </p>
                        <p>The ticket registration page is in French.</p>
                        <p>
                          If your French vocabulary is limited to "Oui Oui
                          Baguette", you may want to use Google Translate there to
                          complete your purchase!
                        </p>
                        <div class="modal-action">
                          <form class="flex gap-4" method="dialog">
                            <a
                              href={HELLOASSO_LINK}
                              target="_blank"
                              class="btn btn-primary">Get your ticket</a
                            >
                            <button class="btn">Close</button>
                          </form>
                        </div>
                      </div>
                    </dialog>
                  </div>
                </li>
                <li
                  class="flex-1 card bg-base-200 shadow-lg border border-base-300/50 hover:border-base-300 transition-colors"
                >
                  <div class="card-body flex flex-col items-center py-8">
                    <h3 class="card-title text-xl text-center mb-1">Regular Ticket</h3>
                    <p class="text-sm text-base-content/60 mb-4">Standard conference ticket</p>
                    <span class="text-4xl font-bold mb-6">€{TICKET_PRICE}</span>
                    {
                      new Date() >= new Date(OPEN_TICKET_SALE_DATE) ? (
                        TICKET_SOLD_OUT ? (
                          <p class="text-base-content/60 text-sm">Sold out</p>
                        ) : (
                          <button
                            class="btn btn-primary w-full"
                            onclick="document.getElementById('ticket-modal').showModal()"
                          >
                            Get your ticket
                          </button>
                        )
                      ) : (
                        <p class="text-base-content/60 text-sm text-center">
                          Not yet on sale from
                          {displayDate(OPEN_TICKET_SALE_DATE, "en-US")})
                        </p>
                      )
                    }
                  </div>
                </li>
                <li
                  class="flex-1 card bg-base-200 shadow-lg border border-base-300/50 hover:border-base-300 transition-colors"
                >
                  <div class="card-body flex flex-col items-center py-8">
                    <h3 class="card-title text-xl text-center mb-1">Workshop Ticket</h3>
                    <p class="text-sm text-base-content/60 mb-4">Conference + Workshop</p>
                    <span class="text-4xl font-bold mb-6">€{WORKSHOP_TICKET_PRICE}</span>
                    {
                      new Date() >= new Date(OPEN_WORKSHOP_TICKET_SALE_DATE) ? (
                        WORKSHOP_TICKET_SOLD_OUT ? (
                          <p class="text-base-content/60 text-sm">Sold out</p>
                        ) : (
                          <button
                            class="btn btn-primary w-full"
                            onclick="document.getElementById('ticket-modal').showModal()"
                          >
                            Get your ticket
                          </button>
                        )
                      ) : (
                        <p class="text-base-content/60 text-sm text-center">
                          Not yet on sale from
                          {displayDate(OPEN_WORKSHOP_TICKET_SALE_DATE, "en-US")})
                        </p>
                      )
                    }
                  </div>
                </li>
              </ul>
        )}

        {TICKETING_TRIGGER_EVENT === 'awaiting' && (
          <div class="max-w-2xl mx-auto text-center">
            <p class="text-xl text-base-content/80 mb-4">
              Ticket sales will open soon! Stay tuned for updates.
            </p>
          </div>
        )}

        {TICKETING_TRIGGER_EVENT === 'closed' && (
          <div class="max-w-2xl mx-auto text-center">
            <p class="text-xl text-base-content/80 mb-4">
              Ticket sales are now closed.
            </p>
            <p class="text-base text-base-content/60">
              Thank you for your interest! If you have any questions, please contact us.
            </p>
          </div>
        )}
      </div>

      <!-- Sponsors Section -->
      {SPONSORS.length > 0 && (
        <div class="mb-16">
          <h2 class="text-3xl md:text-4xl font-bold mb-8 text-center">Our Sponsors</h2>
          <Sponsors />
        </div>
      )}

      <!-- Partners Section -->
      {PARTENERS.length > 0 && (
        <div class="mb-16">
          <h2 class="text-3xl md:text-4xl font-bold mb-8 text-center">Our Partners</h2>
          <Partners />
        </div>
      )}
    </section>
  </main>
</Layout>

<style>
  .title-font {
    font-family: "Bangers", sans-serif;
  }
</style>
