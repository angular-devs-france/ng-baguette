---
import { EVENT_DATE, ADDRESS, SITE_ACRONYM } from "../consts";
import { NAVIGATION_LINKS } from "../consts";
import { getRelativeLocaleUrl } from "astro:i18n";
import { displayDate } from "../utils";

const locale = Astro.currentLocale!;
---

<header class="sticky top-0 z-10 backdrop-blur-md bg-base-100/50">
  <div class="navbar px-4 sm:px-6 lg:px-8">
    <div class="navbar-start">
      <div class="dropdown">
        <label for="my-drawer" class="btn btn-ghost lg:hidden">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16" /></svg>
        </label>
      </div>
      <a href={getRelativeLocaleUrl(locale, "/")} class="flex items-center gap-2">
        <img src="/ng-baguette-light-logo.svg" alt="NG Baguette Logo" class="h-10 w-auto">
        <span class="hidden sm:inline text-xl font-bold title-font">{SITE_ACRONYM}</span>
      </a>
    </div>

    <div class="navbar-center hidden lg:flex">
      <ul class="menu menu-horizontal px-1">
        {
          NAVIGATION_LINKS[locale]
            .filter(link => link.condition ? link.condition() : true)
            .map(link => (
              <li>
                <a href={getRelativeLocaleUrl(locale, link.href)} class="text-base">
                  {link.title}
                </a>
              </li>
            ))
        }
      </ul>
    </div>

    <div class="navbar-end">
      <div class="hidden md:flex flex-col items-end mr-4">
        <span class="text-sm font-semibold">{displayDate(EVENT_DATE, locale)}</span>
        <span class="text-xs">{ADDRESS.addressLocality}, {ADDRESS.addressCountry}</span>
      </div>
      <div class="flex gap-1">
        <a href="/en" class={`btn btn-xs ${locale === "en" ? "btn-primary" : "btn-ghost"}`}>EN</a>
        <a href="/fr" class={`btn btn-xs ${locale === "fr" ? "btn-primary" : "btn-ghost"}`}>FR</a>
      </div>
    </div>
  </div>
</header>

<style>
  .title-font {
    font-family: "Lilita", sans-serif;
  }
</style>
